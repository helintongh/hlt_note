## 内存泄漏崩溃的问题

内存崩溃往往从三个方向排查:

1. malloc/free 是否成对
2. 是否踩内存以及空指针
3. 文件句柄未关闭导致句柄越来越多然后`fclose`到了空`FILE*`类型变量

linux查看打开了多少文件句柄的shell语句:

```shell
ls -l | wc -l
# 排查具体文件
ls -l | grep "/tmp/xxx" | wc -l
```

最近就遇到一个bug,仅仅两个文件就占用了4000个句柄。

以上就是排查句柄泄漏的思路。